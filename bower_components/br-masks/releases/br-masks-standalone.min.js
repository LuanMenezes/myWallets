!function(e,n){"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?module.exports=n():e.StringMask=n()}(this,function(){function e(e,n){for(var t=0,r=n-1,s={escape:!0};r>=0&&s&&s.escape;)s=a[e.charAt(r)],t+=s&&s.escape?1:0,r--;return t>0&&t%2===1}function n(e,n){var t=e.replace(/[^0]/g,"").length,r=n.replace(/[^\d]/g,"").length;return r-t}function t(e,n,t,r){return r&&"function"==typeof r.transform&&(n=r.transform(n)),t.reverse?n+e:e+n}function r(e,n,t){var s=e.charAt(n),i=a[s];return""!==s&&(!(!i||i.escape)||r(e,n+t,t))}function s(e,n,t){var r=e.split("");return r.splice(t>=0?t:0,0,n),r.join("")}function i(e,n){this.options=n||{},this.options={reverse:this.options.reverse||!1,usedefaults:this.options.usedefaults||this.options.reverse},this.pattern=e}var a={0:{pattern:/\d/,_default:"0"},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,optional:!0,recursive:!0},S:{pattern:/[a-zA-Z]/},U:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},L:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},$:{escape:!0}};return i.prototype.process=function(i){function o(e){if(!w&&r(p,k,m.inc))return!0;if(w||(w=v.length>0),w){var n=v.shift();if(v.push(n),e.reverse&&c>=0)return k++,p=s(p,n,k),!0;if(!e.reverse&&c<i.length)return p=s(p,n,k),!0}return k<p.length&&k>=0}if(!i)return"";i+="";for(var p=this.pattern,u=!0,f="",c=this.options.reverse?i.length-1:0,l=n(p,i),h=!1,v=[],w=!1,m={start:this.options.reverse?p.length-1:0,end:this.options.reverse?-1:p.length,inc:this.options.reverse?-1:1},k=m.start;o(this.options);k+=m.inc){var d=p.charAt(k),g=i.charAt(c),y=a[d];if(!w||g){if(this.options.reverse&&e(p,k)){f=t(f,d,this.options,y),k+=m.inc;continue}if(!this.options.reverse&&h){f=t(f,d,this.options,y),h=!1;continue}if(!this.options.reverse&&y&&y.escape){h=!0;continue}}if(!w&&y&&y.recursive)v.push(d);else{if(w&&!g){y&&y.recursive||(f=t(f,d,this.options,y));continue}if(v.length>0&&y&&!y.recursive){u=!1;continue}if(!w&&v.length>0&&!g)continue}if(y)if(y.optional){if(y.pattern.test(g)&&l)f=t(f,g,this.options,y),c+=m.inc,l--;else if(v.length>0&&g){u=!1;break}}else if(y.pattern.test(g))f=t(f,g,this.options,y),c+=m.inc;else{if(g||!y._default||!this.options.usedefaults){u=!1;break}f=t(f,y._default,this.options,y)}else f=t(f,d,this.options,y),!w&&v.length&&v.push(d)}return{result:f,valid:u}},i.prototype.apply=function(e){return this.process(e).result},i.prototype.validate=function(e){return this.process(e).valid},i.process=function(e,n,t){return new i(n,t).process(e)},i.apply=function(e,n,t){return new i(n,t).apply(e)},i.validate=function(e,n,t){return new i(n,t).validate(e)},i}),function(e,n){"function"==typeof define&&define.amd?define(["string-mask"],n):"object"==typeof exports?module.exports=n(require("string-mask")):e.BrM=n(e.StringMask)}(this,function(e){if(!e)throw new Error("StringMask not found");var n=function(n){var t=new e("00000-000");if(!n)return n;var r=t.process(n);return r.result},t=function(n){if(!n)return n;var t=new e("00.000.000"),r=t.apply(n);return r},r=function(n){if(!n)return n;var t=new e("00.000.000/0000-00"),r=t.apply(n);return r},s=function(e){return e&&e.length?e.length<=11?i(e):r(e):e},i=function(n){var t=new e("000.000.000-00");if(!n)return n;var r=t.apply(n);return r},a=function(n,t,r,s){t=!t&&0!==t||t<0?2:t,r=r||".",s=s||"";var i=t>0?r+new Array(t+1).join("0"):"",a="#"+s+"##0"+i;n=parseFloat(n),n||(n=0);var o=!1;n<0&&(n*=-1,o=!0);var p=new e(a,{reverse:!0}),u=p.apply(n.toFixed(t).replace(/[^\d]+/g,""));return o?"("+u+")":u},o=function(n,t){function r(e){return e.replace(/[^0-9]/g,"")}function s(e,n){if(e&&i[e]){var t=e.toUpperCase();if("SP"===t&&/^P/i.test(n))return i.SP[1].mask;for(var s=i[e],a=0;s[a].chars&&s[a].chars<r(n).length&&a<s.length-1;)a++;return s[a].mask}}if(!n||"string"!=typeof n)return n;var i={AC:[{mask:new e("00.000.000/000-00")}],AL:[{mask:new e("000000000")}],AM:[{mask:new e("00.000.000-0")}],AP:[{mask:new e("000000000")}],BA:[{chars:8,mask:new e("000000-00")},{mask:new e("0000000-00")}],CE:[{mask:new e("00000000-0")}],DF:[{mask:new e("00000000000-00")}],ES:[{mask:new e("00000000-0")}],GO:[{mask:new e("00.000.000-0")}],MA:[{mask:new e("000000000")}],MG:[{mask:new e("000.000.000/0000")}],MS:[{mask:new e("000000000")}],MT:[{mask:new e("0000000000-0")}],PA:[{mask:new e("00-000000-0")}],PB:[{mask:new e("00000000-0")}],PE:[{chars:9,mask:new e("0000000-00")},{mask:new e("00.0.000.0000000-0")}],PI:[{mask:new e("000000000")}],PR:[{mask:new e("000.00000-00")}],RJ:[{mask:new e("00.000.00-0")}],RN:[{chars:9,mask:new e("00.000.000-0")},{mask:new e("00.0.000.000-0")}],RO:[{mask:new e("0000000000000-0")}],RR:[{mask:new e("00000000-0")}],RS:[{mask:new e("000/0000000")}],SC:[{mask:new e("000.000.000")}],SE:[{mask:new e("00000000-0")}],SP:[{mask:new e("000.000.000.000")},{mask:new e("-00000000.0/000")}],TO:[{mask:new e("00000000000")}]},a=s(t,n);if(!a)return n;var o=a.process(r(n));return t&&"SP"===t.toUpperCase()&&/^p/i.test(n)?"P"+o.result:o.result},p=function(n){if(!n)return n;var t="0000 0000 0000 0000 0000 0000 0000 0000 0000 0000 0000",r=new e(t),s=r.apply(n);return s},u=function(n){var t=new e("(00) 0000-0000"),r=new e("(00) 00000-0000"),s=new e("0000-000-0000");if(!n)return n;var i;return n+="",i=0===n.indexOf("0800")?s.apply(n):n.length<11?t.apply(n):r.apply(n)};return{ie:o,cpf:i,cnpj:r,cnpjBase:t,phone:u,cep:n,finance:a,nfeAccessKey:p,cpfCnpj:s}});